{% extends "base.html" %}
{% block title %}All Available Free Games | WeeklyGameVault{% endblock %}

{% block body_class %}page-availablegames{% endblock body_class %}

{% block content %}
<div class="content-wrapper">
  <h1 class="mb-4 text-center">All Available Free Games</h1>
  
  <!-- Navigation Links -->
  <nav class="game-navigation mb-5">
    <ul class="nav-list">
      {% if prime_games %}
        <li><a href="#prime_games">Prime Gaming</a></li>
      {% endif %}
      {% if epic_games %}
        <li><a href="#epic_games">Epic Games</a></li>
      {% endif %}
      {% if gog_free %}
        <li><a href="#gog_free">GOG Free Games Collection</a></li>
      {% endif %}
      {% if gog_giveaway %}
        <li><a href="#gog_giveaway">GOG Giveaway</a></li>
      {% endif %}
    </ul>
  </nav>

  <!-- Prime Gaming -->
  {% if prime_games %}
    <section id="prime_games">
      <h2>Prime Gaming</h2> 
      <table class="offer-table">
        {% set columns = 4 %}
        {% set total = prime_games|length %}
        {% for i in range(total) %}
          {% if i % columns == 0 %}<tr>{% endif %}
          {% set g = prime_games[i] %}
          <td>
            <table class="offer-inner-table">
              <tr style="vertical-align: top;">
                <td align="center" style="padding:0;">
                  <img src="{{ g.imageUrl|default('#') }}" alt="{{ g.title }}">
                  <p class="game-title">{{ g.title }}</p>
                </td>
              </tr>
              <tr style="vertical-align: bottom;">
                <td align="center" style="padding:0;">
                  <a href="{{ g.url }}" class="claim-btn" target="_blank">Claim here</a>
                </td>
              </tr>
            </table>
          </td>
          {% if (i + 1) % columns == 0 or i == total - 1 %}</tr>{% endif %}
        {% endfor %}
      </table>
      <br>
    </section>
  {% endif %}

  <!-- Epic Games -->
  {% if epic_games %}
   <!-- Navigation Links -->
   <nav class="game-navigation mb-5">
    <ul class="nav-list">
      {% if prime_games %}
        <li><a href="#prime_games">Prime Gaming</a></li>
      {% endif %}
      {% if epic_games %}
        <li><a href="#epic_games">Epic Games</a></li>
      {% endif %}
      {% if gog_free %}
        <li><a href="#gog_free">GOG Free Games Collection</a></li>
      {% endif %}
      {% if gog_giveaway %}
        <li><a href="#gog_giveaway">GOG Giveaway</a></li>
      {% endif %}
    </ul>
  </nav>
    <section id="epic_games">
      <h2>Epic Games</h2>
      <table class="offer-table">
        {% set columns = 4 %}
        {% set total_epic = epic_games|length %}
        {% for i in range(total_epic) %}
          {% if i % columns == 0 %}<tr>{% endif %}
          {% set g = epic_games[i] %}
          <td>
            <table class="offer-inner-table">
              <tr style="vertical-align: top;">
                <td align="center" style="padding:0;">
                  <img src="{{ g.imageUrl|default('#') }}" alt="{{ g.title }}">
                  <p class="game-title">{{ g.title }}</p>
                </td>
              </tr>
              <tr style="vertical-align: bottom;">
                <td align="center" style="padding:0;">
                  <a href="{{ g.url }}" class="claim-btn" target="_blank">Claim here</a>
                </td>
              </tr>
            </table>
          </td>
          {% if (i + 1) % columns == 0 or i == total_epic - 1 %}</tr>{% endif %}
        {% endfor %}
      </table>
      <br>
    </section>
  {% endif %}

  <!-- GOG Free Games Collection -->
  {% if gog_free %}
    <!-- Navigation Links -->
    <nav class="game-navigation mb-5">
        <ul class="nav-list">
          {% if prime_games %}
            <li><a href="#prime_games">Prime Gaming</a></li>
          {% endif %}
          {% if epic_games %}
            <li><a href="#epic_games">Epic Games</a></li>
          {% endif %}
          {% if gog_free %}
            <li><a href="#gog_free">GOG Free Games Collection</a></li>
          {% endif %}
          {% if gog_giveaway %}
            <li><a href="#gog_giveaway">GOG Giveaway</a></li>
          {% endif %}
        </ul>
      </nav>
    <section id="gog_free">
      <h2>GOG Free Games Collection</h2>
      <table class="offer-table">
        {% set columns = 4 %}
        {% set total_free = gog_free|length %}
        {% for i in range(total_free) %}
          {% if i % columns == 0 %}<tr>{% endif %}
          {% set g = gog_free[i] %}
          <td>
            <table class="offer-inner-table">
              <tr style="vertical-align: top;">
                <td align="center" style="padding:0;">
                  <img src="{{ g.imageUrl|default('#') }}" alt="{{ g.title }}">
                  <p class="game-title">{{ g.title }}</p>
                </td>
              </tr>
              <tr style="vertical-align: bottom;">
                <td align="center" style="padding:0;">
                  <a href="{{ g.url }}" class="claim-btn" target="_blank">Claim here</a>
                </td>
              </tr>
            </table>
          </td>
          {% if (i + 1) % columns == 0 or i == total_free - 1 %}</tr>{% endif %}
        {% endfor %}
      </table>
      <br>
    </section>
  {% endif %}

  <!-- GOG Giveaway -->
  {% if gog_giveaway %}
      <!-- Navigation Links -->
  <nav class="game-navigation mb-5">
    <ul class="nav-list">
      {% if prime_games %}
        <li><a href="#prime_games">Prime Gaming</a></li>
      {% endif %}
      {% if epic_games %}
        <li><a href="#epic_games">Epic Games</a></li>
      {% endif %}
      {% if gog_free %}
        <li><a href="#gog_free">GOG Free Games Collection</a></li>
      {% endif %}
      {% if gog_giveaway %}
        <li><a href="#gog_giveaway">GOG Giveaway</a></li>
      {% endif %}
    </ul>
  </nav>
    <section id="gog_giveaway">
      <h2>GOG Giveaway</h2>
      <table class="offer-table">
        {% set columns = 4 %}
        {% set total_giveaway = gog_giveaway|length %}
        {% for i in range(total_giveaway) %}
          {% if i % columns == 0 %}<tr>{% endif %}
          {% set g = gog_giveaway[i] %}
          <td>
            <table class="offer-inner-table">
              <tr style="vertical-align: top;">
                <td align="center" style="padding:0;">
                  <img src="{{ g.imageUrl|default('#') }}" alt="{{ g.title }}">
                  <p class="game-title">{{ g.title }}</p>
                </td>
              </tr>
              <tr style="vertical-align: bottom;">
                <td align="center" style="padding:0;">
                  <a href="{{ g.url }}" class="claim-btn" target="_blank">Claim here</a>
                </td>
              </tr>
            </table>
          </td>
          {% if (i + 1) % columns == 0 or i == total_giveaway - 1 %}</tr>{% endif %}
        {% endfor %}
      </table>
      <br>
    </section>
  {% endif %}

  <!-- Back to Top Link -->
  <div class="back-to-top text-center mt-5">
    <a href="#top" class="back-to-top-link">Back to Top</a>
  </div>
</div>
{% endblock content %}
